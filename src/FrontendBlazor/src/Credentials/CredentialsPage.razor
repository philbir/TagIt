@attribute [Route(Routing.Credentials.Page)]

<MudContainer MaxWidth="MaxWidth.Medium">
    <MudDataGrid Items="@Service.Credentials" T="CredentialItem" Striped RowClick="@RowClicked">
        <Columns>
            <Column T="CredentialItem" Field="Name" />
            <Column T="CredentialItem" Field="Product" />
            <Column T="CredentialItem" Field="ClientId" />
            <Column T="CredentialItem" Field="Authority" />
        </Columns>
    </MudDataGrid>
    <MudFab Class="mt-10" Href="@Routing.Credentials.Add" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" />
</MudContainer>

@code {

    [Inject]
    public SettingsService Service { get; set; }

    [Inject]
    public NavigationManager Navigation { get; set; }


    override protected async Task OnInitializedAsync()
    {
        Service.LoadCredentialsAsync((j) =>
        {
            StateHasChanged();
        });
    }

    private void RowClicked(DataGridRowClickEventArgs<CredentialItem> e)
    {
        Navigation.NavigateTo(Routing.Credentials.GetEdit(e.Item.Id));
    }
}
